# Jetpack Principles

[TOC]

## `Jetpack` 的精神

创建组件、工具和指南，使其能够快速、轻松地构建出色的 Android 应用程序，包括来自 Google 和开源的贡献
社区。

## `Jetpack` 库的核心原则

Jetpack 库为 Android 开发者提供以下保证：

_格式为“Jetpack 库是……”，其中包含子点“库应该……”_

### 1. 针对外部客户采用进行了优化

-   库应该为第一方客户服务，甚至可以有专门针对第一方需求定制的可选模块，但主要功能应该针对外部开发人员。
-   通过 3p 客户采用率和 1p 客户采用率来衡量成功。

### 2. 旨在满足现实世界的用例

-   与开发人员会面并解决他们构建应用程序时遇到的问题 - 不仅仅是为了提供与现有平台 `API` 和功能的同等性
-   公开范围狭窄的模块以解决**开发人员的痛点**
    - 通过将可能不会在单个应用程序中共存的不相交用例范围界定为各个模块，为外部开发人员提供更小的构建块。
-   使用**简单的顶级 API** 实现分层复杂性
    - 复杂的用例支持不得以增加最常见的简单用例的 `API` 复杂性为代价。
-   有**支持数据或研究假设**（研究、需求等）来证明库是必要和充分的。

### 3. 了解现有的开发者生态系统

-   避免重新发明轮子——不要创建一个已经存在且被社区接受为最佳实践的新库

### 4. 与 Jetpack 的其余部分一致化

-   确保在一个组件中学到的概念可以在其他组件中看到和理解
-   利用 `Jetpack` 和社区标准，例如：
    - 对于异步工作，使用 `Kotlin` 协程和/或 `Kotlin` 流
    - 对于数据持久性，使用 `Jetpack DataStore` 存储简单且小的数据，使用 `Room` 存储更复杂的数据

### 5. 开源开发并与 `AOSP` `Android` 兼容

-   在整个 `Android` 生态系统中公开面向开发人员的统一 `API` 界面
-   在 `AOSP` 中进行开发，以提供新功能和错误修复的可见性并鼓励外部参与
-   避免核心功能的专有服务或闭源库，而是提供集成点，允许开发人员在各种服务之间进行选择作为支持实现
-   遵守 `AndroidX` 检查和政策，例如 `API` 跟踪和样式检查
-   有关使用闭源和专有库和服务的指南，请参阅[Integrating proprietary components](/company/teams/androidx/open_source.md)

### 6. 编写使用惯用语言的 `API` 

-   编写让使用 [Kotlin](https://developer.android.com/kotlin/interop) 和 Java 这两种的客户端感觉自然的 API 

### 7. 与广泛的 API 级别兼容

-   根据客户需求支持旧平台和`API`级别
-   提供持续维护以确保与新平台的兼容性
-   设计时期望每个 `Jetpack API` 对于 `Android` 都是**一次编写、随处运行**，并在必要时进行优雅降级

### 8. 与最佳实践相结合

- 指导开发人员使用现有的 `Jetpack` 最佳实践库，包括架构组件

### 9. 设计工具和可测试性

-   为库本身编写足够的单元和集成测试
-   为开发人员提供随附的测试故事，用于集成测试他们自己的应用程序（例如，测试某些库公开的工件）
    - `Robolectric` 不需要隐藏库类
    - `ex.Room` 有内存测试支持
-   尽可能与库同时构建工具，否则，后期要考虑工具

### 10. 使用明确定义的流程发布

- 遵循语义版本控制和预发布修订指南，每个库都会通过 `alpha`、`beta` 和 `rc` 修订版来获取反馈并确保稳定性

### 11. 有据可查

- 除了清晰的 `API` 参考文档之外，还为开发人员在 `d.android.com` 上提供入门和用例文档

### 12.支持长期使用

- 长期支持和维护计划

### 13. 现代发展的例子

- 在可能的情况下，针对最新的语言、操作系统功能和工具。 所有新库都应使用 `Kotlin` 编写，使用最新稳定的 `Android SDK` 进行编译，并假设客户端使用最新稳定版本的 `Android Studio`、`Gradle` 和 `AGP`。 请参阅 [AndroidX API 指南](/company/teams/androidx/api_guidelines/index.md#dependency-kotlin) 了解更多详细信息，包括 `Java` 源代码和 `-ktx` 工件的使用。

### 14. 高质量的 `API` 和所有权

- 所有 `Jetpack` 库均应遵守 `Android` 和 `Jetpack` `API` 指南

## 目标受众

`Jetpack` 库被各种外部开发人员使用，包括从开发第一个 `Android` 应用程序的个人到正在开发的大公司
大规模生产应用程序。然而，一般来说，`Jetpack` 库的设计是专注于中小型应用程序开发团队。

-   注意：如果该库针对的是一组利基（`a niche set of apps`）应用程序，那么开发人员会感到痛苦
    `Jetpack` 库解决的点必须足够重要证明其需要的合理性。
    -   Example : Jetpack Enterprise library
